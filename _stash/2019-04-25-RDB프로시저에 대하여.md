

왜 이런 방향성을 잡았는가에 대한 히스토리를 기록.



CMS 를 비롯해서 현재 대부분의 비지니스 로직을 프로시저 단에서 처리하는 경우가 다반사.

프로시저의 사용에 대한 이유는 추상적으로 아래의 사례를 얘기해볼 수 있음.

- 저급 언어의 사용에 따르는 영속성 처리에 대한 고급 매핑이 부족한 경우
- 업무 계층이 어플리케이션 개발과 DB 운영로 확연하게 나뉘는 경우
- 어플리케이션 변경 없이 로직의 변경이 서비스 무중단으로 해야는 경우


하지만 현재 재직 중인 웹 개발팀에서의 사용 이유는 아래의 상황이며, 이런 이유로 프로시저를 사용할 이유는 전혀 없음.

- DB 운영에 대한 R&R(타 관리 업체에 위탁 중이지만, 하드웨어 관리만 지원함)이 명확히 나뉘어져 있지 않으며
- 웹 개발의 경우에는 ORM 을 시작해서 단순 query 매핑까지 10년 이상 성숙하고 활발한 생태계를 이루고 있음.
로드밸런서나 , 리버스 프록시와 같은 서비스 무중단 반영에 대한 기술을 사용 중임.


또한 프로시저 사용시 따르는 문제사항은 크게 아래와 같음.

- 객체 모델링이 파괴됨
	- 도메인 난제를 OOP 로 풀이하고 구현하고는, 영속화 단계에서 스키마 구조로 다시 매핑한다는 모순에서 나온 것이 ORM 이라는 것을 상기해보면 됨.
- 테스트 코드 작성의 어려움
- 비지니스 로직 상의 복수 제어 처리의 어려움
	- 예를 들면 회원 정보를 Mysql 에서 가져오고 변경하며, 추가적으로 다른 저장소에도 업데이트 해줘야 한다, 어느 한 곳이라도 실패 시 롤백해주어야함
- 버전 릴리즈 관리 및 어플리케이션과의 버전 불일치
	- 어플리케이션과 프로시저 간의 2개의 관리 포인트가 늘어나며, 이로 인한 관리 불일치가 생겨남
	- 이는 배포 stage 마다 관리를 추가로 해주어야 한다는 상황 때문에 관리 누수가 발생함 (예: QA와 Production 의 프로시저가 상이함)
