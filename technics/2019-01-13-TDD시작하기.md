---
layout: post
title:  "TDD 시작하기"
author: "glqdlt"
---

아래는 사내에서 TDD 에 관해 강의하면서 진행했던 내용을 정리한 아티클입니다.

## TDD 란?

Clean code that woarks (잘 동작하는 깔끔한 코드) - Ron Jeffries(론 제프리)

Test the program before you write it(프로그램을 작성하기 전에 테스트를 먼저 작성하는 것) - Kent Beck(켄트 백)

TDD에서 말하는 테스트와 전통적인 테스트 방법론에서 이야기하는 단위 테스트는 조금 차이가 있다. TDD에서의 단위 테스트는 함수(기능적) 단위의 테스트를 뜻하고, 전통적인 방법론에서는 사용자 측면에서 제품의 기능 테스트에 가깝다. 예를 들어 로그인을 한다는 행위를 놓고 두개를 비교한다면, 전통적인 방법론의 단위 테스트는 '로그인 입력 창에 ID/PW 를 입력하고, 버튼을 누르고 로그인 성공 화면을 기다린다' 까지가 될 것이고, TDD 에서는 ID 와 PW 의 Validation 을 담당하는 기능의 테스트, 버튼이 제대로 Submit 되는지의 테스트, 로그인 성공 후의 응답 테스트 등이 있을 수 있다.


테스트 코드는 매우 중요하다. 임베디드 엔지니어링을 예로 두고 설명해보면, 기본적으로 하드웨어는 제품이 동작하기 전에 전체 테스트를 수행하고 제품을 가동시킨다. 메인보드의 경우 램 슬롯에 램이 잘 장착됬는 지, CPU는 장착되었는 지 등을 사전 테스트하고 실패시에는 비프음과 함께 컴퓨터 파워를 차단시키고 구동을 멈추게 해버린다. 만약 위와 같은 테스트 검증 과정이 없다면, 의도치 않거나 혹은 더 굉장하고 끔찍한 상황을 마주할 수도 있게 된다. 


> "최대한 빨리 실패하기" TDD는 실패를 통해 배움을 늘려가는 기법이다. OK 조건을 사전에 정해두고 빠르게 실패를 경험하며, 조건을 등대로 삼아 실패 상황을 최대한 빨리 극복하고자 노력한다. - 테스트 주도 개발 : 고품질 쾌속개발을 위한 TDD 실처법과 도구

> 우리는 흔히 클래스를 설계할 때 속성(필드:멤버변수)에 집중해서 설계 하는 경향이 있다. ... 클래스를 정의할 때 중요한 건 '속성' 이 아니라 '동작(메소드)' 이다. 동작을 먼저 정의하고, 동작에 필요한 속성을 고려한다 는 식으로 접근하는 편이, 불필요한 속성이 클래스 내에 섞여 들어가는 걸 줄여준다. - 테스트 주도 개발 : 고품질 쾌속개발을 위한 TDD 실처법과 도구

> "테스트에서 오류와 실패" 실패는 AssertEqauls 등의 테스트 조건식을 만족시키지 못했다는 것을 의미하고, 오류는 테스트 케이스 수행 중 예상치 못한 예외(exception)가 발생해서 테스트 수행을 멈췄다는 것을 뜻한다. 테스트 케이스가 가치를 지니기 위해서는, 어떠한 경우에도 테스트 케이스 그 자체는 정상적으로 끝까지 수행되어야 한다.  - 테스트 주도 개발 : 고품질 쾌속개발을 위한 TDD 실처법과 도구

> "여러개의 실패하는 테스트 케이스의 빠른 선언" 순수한 TDD 론에서는 실패하는 테스트를 여러 개 만들어 놓고 진행하는 걸 권장하지 않는다.

## TDD 라이프사이클

<img src="http://2.bp.blogspot.com/-eMxpoJmZPwM/UvHY2BBeuHI/AAAAAAAAAwM/IvlkwTT4aGU/s1600/Picture1.gif"/>

1. 질문(ASK) == Write Failing Test == Red

    테스트의 기본 골자를 작성한다. 이 함수가 요로케요로케 하면 동작할거같음? 이라고 묻는거와 같다.

2. 결과(Result,Response)  == Make Test Pass == Green

    테스트의 수행 결과를 확인 한다.

3. 정제(Refine) == Refactor == Yellow

    코드를 다듬는 과정이다. 지저분하게 불필요한 것은 제거하고 모호한 것은 명확하게 한다.

4. 반복(Repeat)

    1,2,3 을 사이클(cycle)로 보고, 다시 반복한다.


## TDD 용어 정리

TDD 를 하면서 자주 접하게 되는 단어들에 대한 정리.

- 픽스처(FIXTURE)

- Stub

- Mock

- Fake