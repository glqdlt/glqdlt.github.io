---
layout: post
title:  "객체지향 위키"
author: "glqdlt"
---

## 상속과 위임

상속과 위임은 클래스다이어그램에서 일반화 단계에서 많이 마주하게 되는 개념이다.

### 상속(inheritance)

상속을 표현한 클래스 다이어그램은 아래와 같다.

상속은 클래스 사이의 관계를 표현한다. 클래스는 정적이다, 상속 역시 정적인 다이어그램이다.


<img src="http://www.plantuml.com/plantuml/uml/Iyv9B2vMSCpBp4tCuU9A1lDSyjEXBEV44YukYAI2JOskBbWAcGzM0000"/>

### 위임 패턴 (Delegation Pattern)

맡긴다는 의미의 위임 패턴은, 사용자가 외부 인스턴스를 직접 생성해 강한 커플링으로 가지는 패턴이다. (uml 에서 색이 칠해진다.) 집합 관계에서 합성composition(색이 칠해짐) 와 집약 aggregation(색이 없음 : 흰색) 2가지로 나뉘는 데, 합성과 집합의 가장 큰 차이점은 외부 인스턴스 생성을 사용자 자기 자신이 하거나 외부에서 주입받는 지의 차이점이 있다. 


- 의존관계

    내부의 기능이 외부의 인스턴스의 기능을 사용해서 처리하게 되는 경우를 의존한다고 표현한다.

- 집합관계

    집합 관계는 외부 객체를 자신의 속성으로 의존하는 경우를 말한다.

    - 합성(composition) : 외부 인스턴스를 집합하는 속성을 자기 스스로가 직접 생성해서 사용한다. 강한 커플링을 가진다.
    - 집약(aggregation) : 외부 인스턴스를 집합하는 속성을 외부에서 생성된 것을 주입받아 사용한다. 느슨한 커플링을 가진다.

위임 패턴에서는 composition 을 사용하고 있다. 자바로 배우는 리팩토링 임문에서는 이를 contains 라고 표현하고 있다.

사용자의 기능을 외부의 기능을 호출하기 위해 외부 인스턴스를 사용자가 포함할 때를 위임이라고 표현한다. 위임은 클래스처럼 정적이지 않고 동적이다, 이유는 런타임 시점 이후에 바뀔 수 있기 때문이다. 

- 집합관계 vs 의존관계

위의 의존관계와 집합 관계가 외부의 기능을 참조한다는 것에 비슷해보이지만, 집합 관계는 의존되는 외부 객체를 자기 속성을 가지고, 의존 관계는 기능 사용시에만 외부 객체를 넘겨받아 호출하는 차이점이 있다. 즉 집합관계에서는 외부 의존도가 객체의 생성부터 소멸까지 계속 의존되는 형태이고, 의존관계는 실제 기능이 사용될 때에만 의존하게 되는 라이프사이클 차이가 있다.

<img src="http://www.plantuml.com/plantuml/uml/Iyv9B2vM2CXCJapEAAtcKW02xSIIaiJaR0rDhbekhcIml5TcU7u-H5Qt0ABM2ge7LKirL5OF9c1T2p85h5z1IrSNPXCN0000"/>

