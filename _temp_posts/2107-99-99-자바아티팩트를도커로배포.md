---
layout: post
title:  "자바 아티팩트를 도커로 배포"
author: "glqdlt"
---

일단 간단하게 처리해보았다.

docker 와 docker images 는 local 에 있다.

외부의 images 에 배포할 때의 경우에는 어떻게 deployment 할 지 고민해보아야 한다.


```
${project_root}
ㄴsrc
ㄴtarget
.gitignore
Dockerfile
pom.xml
ReadMe.md
```

3. Dockerfile 작성
Dockerfile
```Dockerfile

FROM tomcat:8.5

RUN rm -rf /usr/local/tomcat/webapps/*

COPY target/*.war /usr/local/tomcat/webapps/ROOT.war

EXPOSE 8080

```

4. Build

-Pproduction clean install package

5. Post steps

```shell
docker build . -t glqdlt/my-app

if docker ps | grep glqdlt/my-app
then
	echo 'find cms instance..!'	
	docker stop glqdlt/my-app
    docker rm glqdlt/my-app
else
	echo 'not founded'
fi

docker run -d -p 25555:8080 --name glqdlt/my-app glqdlt/my-app
```