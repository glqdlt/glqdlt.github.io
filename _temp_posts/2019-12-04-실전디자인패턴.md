---
layout: post
title:  "실전 위주의 고급 디자인 패턴"
author: "glqdlt"
---

게임사에서 근무하면서 주로 다루었던 디자인패턴의 내용들을 정리하는 아티클입니다.

이 아티클은 에릭 감마의 GOF의 디자인 패턴을 베이스로 하고 있지만, 모든 내용을 다루진 않고 실무에서 주로 사용했던 실전 위주의 패턴들을 다룹니다.

## 기본적인 디자인 패턴

### 브릿지 패턴

### 탬플릿 메소드 패턴

### 팩토리얼 패턴

### 정적 생성 메소드 패턴 (또는 정적 팩토리 메소드 패턴)

### 데코레이터 패턴

### 프록시 패턴

### 전략 패턴

### 방문자 패턴 (또는 비지터 패턴)

### 관찰자 패턴 (또는 옵저버 패턴)

#### 방문자 vs 관찰자 패턴의 차이

방문자 패턴과 관찰자 패턴이 비슷한 것처럼 느껴질 수 있다. 어떠한 배열을 순회하며 무엇을 하는 모습이 겉보기에는 큰 차이가 없어 보인다. 하지만 두 패턴에는 큰 차이가 있다. 관찰자 패턴은 순회 아이템을 단순 호출만 하며 소모 하는 반면 방문자 패턴은 순회 아이템의 로직 결과에 관심이 많은 차이가 있다. 관찰자 패턴은 어떠한 이벤트를 알리는 용도로 사용되며, 방문자 패턴은 로직의 일부로 소비가 된다. 이게 무슨 말이냐면 관찰자 패턴은 순회 하며 이벤트를 알려주고 결과에 대해서는 관심이 없다. 반면 관찰자 패턴은 결과값에 대한 기대치를 가지며, 순회 아이템의 결과를 연결하여 어떠한 의미 있는 결과 값을 만들어 내는 데에 목적을 둔다. 관찰자 패턴은 브라우저의 클릭 이벤트를 예시로 둘 수가 있다. addEventListner() 의 구동원리를 생각해보면 된다. 방문자 패턴은 Filter 나 interceptor 로 생각하면 된다. 등록된 필터나 인터셉터의 갯수만큼 요청은 해당 필터를 통과하며 어떠한 목적지를 도달하기 위한 파이프라인을 가진다. 도중에 exception 이라도 떨어진다면, 이 파이프라인은 즉시 종료가 된다. 이런 특징 탓에 관찰자 패턴은 결과에 대해 관심이 없기 때문에 대부분 비동기로 구현하는 경우가 대다수이며, 관찰자 패턴은 상황에 따라 다르지만 일련의 순회 아이템을 메소드 체이닝으로 연결하여 동기식으로 구현을 많이 한다.


## 실전 고급 예제

### 브릿지 패턴과 템플릿 패턴 그리고 전략 패턴을 섞은 경우

자사에서 운영 되는 게임을 관리하는 통합 CMS에서 주로 사용했던 패턴이다.

각 게임들이 각기 다른 Dababase 에 유저 정보를 가지고 있고, CMS 는 이를 조회할수 있어야 했다.

실무에서 다룬 게임들은 매우 많았지만, 이 예제에서는 2가지의 게임 GameA와 GameB가 있다고 가정해보자.



# 레퍼런스

- GOF의 디자인패턴, 에릭감마

- 이펙티브 자바, 조슈아 블로흐

