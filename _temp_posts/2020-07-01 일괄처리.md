보통 e커머스 회사에 재직중인 분들의 배치작업 관련해서 많은 포스트가 보인다. 게임 회사도 마찬가지로 배치작업이 많이 필요하다.

사실 매출 집계와 같은 사업 수치 개념으로 보면 데이터 담당 조직에서 대부분 하지만, 나 같은 웹서비스 개발자들도 배치작업이 필요할 때가 많다. (사실 회사란 게 조직끼리 가위 바위 보 싸움으로 갈리긴한다 -_-)

나의 경우는 아래와 같다.

- 어뷰저(비행위 사용자) 제한 또는 제재

- 컨텐츠 일괄 회수 또는 지급

위의 경우는 데이터 유관 조직에서 담당하기 어려운 게임 서비스 영역이다. 보통 데이터 유관 조직에서 집계나 DB 로그 DUMP 같은 작업을 주로 한다, 즉 READ ONLY 작업이고

WITH WRITE 와 같은 트랜잭션 처리가 필요한 부분은 우리 조직에서 하고 있다.

처음에는 단순히 직접 구현해서 만들었다.

원리는 간단하다. 별도의 JobWorker 들을 관리하는 WorkerManager 라는 Worker 를 관리하는 스레드 풀 역활을 하는 컴포넌트를 만들고, 

while 무한루프 돌려서 1초마다 특정 DB를 폴링하면서 count 가 0 이상일 때 트리거 되어서 DB에서 일할거리를 가져와서 Worker 를 만들어서 스레드 풀에 던져놓고 땡이다.


[Spring Batch](https://spring.io/projects/spring-batch)

[Quartz](http://www.quartz-scheduler.org/)
