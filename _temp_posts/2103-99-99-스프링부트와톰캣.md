---
layout: post
title:  "스프링 부트와 톰켓"
author: "glqdlt"
---


스프링 부트는 ```pom.xml```에 아래 구문으로 쉽게 jar 에서 war로 배포할수 있다.

```xml

   <groupId>com.glqdlt...</groupId>
    <artifactId>some..</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>war</packaging>

    <dependencies>
        ...

         <dependency>   
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
        

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-tomcat</artifactId>
            <scope>provided</scope>
        </dependency>
        ...

    </dependencies>

    ...
    <build>
         <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
            </plugin>
        </plugins>
    </build>
    ...

```

구문을 해석하면 굉장히 단순한 내용이다. 내장 된 emebed tomcat 의 scope를 provided 로 선언을 해주면서 빌드 시에 was 를 포함하지 않는 것으로 설정한 것이다. 그리고 아티팩트의 종류를 jar가 아닌 war를 선언해줌으로써 ```spring-boot-maven-plugin``` 에서 알아서 webapp 구조로 구성해준다.

재미난 것은 web.xml 을 boot 구조에서는 찾아볼 수가 없는 데, 이가 가능해지는 것은 servlet 3.0 덕분에 가능해진다. servlet 3.0의 spec을 뒤져보면 web.xml 이 없더라도 webapp 구성을 할 수 있도록 되었기 때문이다. 이를 우리가 자주 사용하는 tomcat의 경우에는 7.0 버전부터 구현되어 지원하게 되었다.

spring-boot 에서는 webapp context에 해당하는 컨테이너를 ```WebApplicationInitializer``` 인터페이스를 구현한 ```SpringBootServletInitializer``` 에서 구현하고 있어, web.xml 이 없어도 간으해지는 것이다.

결국 내장된 톰캣은 7.0버전 이상이라는 것이고,


# 레퍼런스

[spring-boot...war로 배포할 때](https://medium.com/@SlackBeck/spring-boot-%EC%9B%B9-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98%EC%9D%84-war%EB%A1%9C-%EB%B0%B0%ED%8F%AC%ED%95%A0-%EB%95%8C-%EC%99%9C-springbootservletinitializer%EB%A5%BC-%EC%83%81%EC%86%8D%ED%95%B4%EC%95%BC-%ED%95%98%EB%8A%94%EA%B1%B8%EA%B9%8C-a07b6fdfbbde)