---
layout: post
title:  "자바와 리플렉션 그리고 어노테이션"
author: "glqdlt"
---

사내에서 게임 로그를 매 특정 시각마다 스냅샷 하여(발생시간 between 으로) 엑셀로 추출하는 기능을 만들었을 때의 일화입니다. 이 로직은 매우 단순한 배치 어플리케이션이지만, 일이 흔히 노가다였습니다 (엔티티 모델링만 다를 뿐 로직도 공통적으로 똑같습니다.)  엑셀 관련한 유틸 라이브러리로 poi-reader 를 사용했는 데, 이 라이브러리를 Object Mapping 을 지원하지 않아 사용성이 매우 low 했습니다. 이게 무슨말이냐면 A,B,C,D 의 엔티티 클래스의 필드가 모두 다르다면 엑셀의 특정 cell 마다 각 필드를 매핑해주는 일을 개발자가 해야 합니다. 대상 클래스가 2~3개면 그냥 직접 해주면 되겠지만 그 양이 10개 이상이 넘어가면 매우 귀찮은 일이 생깁니다. 여러 고전 기술서적을 보면 이러한 짓을 절대로 하지 말아야할 패턴으로 DRY 패턴이라고 말할 정도니깐요.

다행히 자바에는 리플렉션이라는 기능이 있어 클래스 원형의 정보를 얻을 수 있습니다. 클래스 원형의 정보를 얻는 다는 것은 메소드들이 뭐가 들어있는지를 알 수 있다는 의미이고, getter() 메소드만 호출하는 개발자의 일을 제네릭하게 코드로 바꿀수 있다는 소리가 됩니다.

간단한 리플렉션의 예제는 아래 Github 에 남겨두었습니다. https://github.com/glqdlt/reflection-with-annnotation.git

[Java Reflection API](https://docs.oracle.com/javase/8/docs/technotes/guides/reflection/index.html)

자바 리플렉션은 대상의 클래스 원형 정보를 찾아 볼 수 있게 해주는 기능입니다. 자바 리플렉션은 자바 1.4 부터 시작해서 최근 자바 8버전까지 꾸준하게 업데이트 되어왔습니다. 리플렉션은 롬복이나 Json Object Mapper 와 같은 기능들에서 주로 사용 됩니다.

