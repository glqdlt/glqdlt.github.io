---
layout: post
title:  "tdd 입문"
author: "glqdlt"
---

## When vs Given


When 은 전통적인 스타일이고, Given 은 BDD 스타일이라고 한다.
그런데 given when then 으로 하나 묶어서 많이 표현하는 데, 이게 뭐지?


https://github.com/glqdlt/tdd-spring-web-app.git


## @Before 

```@Before``` 은 테스트 메소드가 실행 되기 전에 사전에 실행시키는 녀석이다. 이 녀석은 대부분 settup 형태의 환경 메소드로 많이들 구현하게 된다. 테스트 필드에 메소드마다 공통적으로 사용할 전역 변수를 선언해놓고 이 ```@Before```를 통해 해당 필드를 initialize 해준다. 

문제는 이 녀석은 각 메소드마다 무조건 1번 실행된다. 예를 들어 각 테스트 메소드들이 필드에서 read only로만 데이터를 가져가서 작업만 한다면 필드의 초기화는 한번만 일어나면 될 것이라는 생각이 들 것이고, 매 메소드마다 호출이 되는 것은 비효율적이라고 생각이 들어왔었다.

이 의구증에 대한 해답은 [토비의 스프링 3-1 Vol.1](#)에서 아래 구절에서 힌트를 얻게 되었다.

 > Junit의 모든 테스트는 실행 순서에 상관없디 독립적으로 항상 동일한 결과를 낼 수 있도록 해야 한다. - p.170

 즉, 비효율적으로 보이던 행동은 각 메소드들이 독립적이고 개별적이어야 한다는 프레임워크 철학 때문이었던 것이다. 



 

Given When Then

http://www.baeldung.com/bdd-mockito

http://www.chidoo.me/index.php/2017/01/04/integration-test-in-springboot-1-4/

https://stackoverflow.com/questions/14736219/difference-between-stub-and-when-in-mockito

https://github.com/mockito/mockito/wiki/Mockito-features-in-Korean

http://lng1982.tistory.com/152


## 내 PC에서는 잘 되는 데..

> 개발자가 테스트를 직접 만들 때 자주 하는 실수가 있다. 성공하는 테스트만 골라서 만드는 것이다. 개발자는 머릿속으로 코드가 잘 돌아가는 상상을 하면서 코드를 만드는 경우가 일반적이다. 그래서 테스트를 작성할 때도 문제가 될 만한 상황은 교묘히 피해서 코드를 만드는 습성이 있다.
'내 PC에서는 잘 되는 데..' 에 대한 이야기는 이러한 예외적인 상황은 모두 피하고 정상적인 케이스만 테스트한 경우가 대부분이다. -토비의 스프링 3-1 vol.1



