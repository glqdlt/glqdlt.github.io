---
layout: post
title:  "[작성중] 프론트엔드 기술 검토"
author: "glqdlt"
---

Reference (기타 참고한 문헌이나 포스트는 본문에 링크를 남김)

* [러닝 자바스크립트](http://book.naver.com/bookdb/book_detail.nhn?bid=12181869)
* [앵귤러 첫걸음](http://book.naver.com/bookdb/book_detail.nhn?bid=12096305)
* [마이크로서비스 아키텍처 구축](http://book.naver.com/bookdb/book_detail.nhn?bid=11714384)
* [클라이언트 서버 웹 앱 만들기](http://book.naver.com/bookdb/book_detail.nhn?bid=8302910)
* [Vue.js.2 프로그래밍](http://book.naver.com/bookdb/book_detail.nhn?bid=12320270)
* [VueJs:다른 프레임워크와의 비교](https://kr.vuejs.org/v2/guide/comparison.html)

---

# 개요

현재 재직 중인 팀에서 프론트엔드 프레임웤의 기술 선정을 하자는 오더를 받았다.
이 글은 기술 검토를 하면서 Angular 와 다른 프론트 프레임웤들에 대해 어떤 것이 팀에 적합할 지에 대한 고민을 기록한 포스트이다.
참고로 필자인 나는 Angular를 가장 처음 접하고 학습하였기 때문에 의도치 않게도 다소 Angular 쪽으로 편향 되어서 글이 작성 되었음을 미리 알린다.

# Single Page Application 의 이해

본 포스트를 이해하기 위해서는 Single Page Application 의 이해가 필요하다. 과거에 작성한 포스트를 [참고](#) 하여도 좋고, 구글링하여 검색하면 좋은 자료가 많이 나온다.


# 검토에 앞서.. 지금 라면과 라멘을 비교하고 있는 게 아닌가?

지금 내가 오더 받은 일은 '라면과 라멘을 비교' 하는 일을 하고 있다. 이게 무슨 말이냐 하면, 현재 재직 중인 팀은 머리 부터 발 끝까지 서버 생각 밖에 없는 서버 엔지니어 집단이다. 이들(나 포함)에게 웹이란, 단순히 운영자의 Interface를 담당하는 Admin Tool 정도로만 인식하고 있다. 그렇다 보니, 웹 UI에 대해 '프레임웤이 다 거기서 거기 아닌가? 트랜드니깐 써보자 : 왜 써야하는가? 에 대해 명확한 이유가 없다'. 라면과 라멘은 이러한 것을 비유하는 말로 Angular Framework 와 React Library 를 비교한다는 것은 굉장히 모순되었다는 것을 말하고 싶었다.
(예전에는 몰랐지만) Angular는 클라이언트 측의 전체 아키텍처를 제공하는 풀 프레임워크이고, React는 프론트엔드 아키텍처에서 전체 구조의 일부(View)를 담당하는 라이브러리이다. 이 점은 두 프레임웤(편의상)이 추구하는 설계와 사상이 다르다는 것을 알리는 힌트가 된다. 추후에 또 언급하겠지만 Angular는 Multi-device(Desktop, Mobile, Web)에 특화되는 욕심 많은 프레임워크이다, 모든 다 방면에서 활용하게 하기 위해서 모듈 방식을 고수하고 개발자에게 Structure를 강제화 한다, 우리가 다 준비 했으니 너는 로직만 짜라고 말한다 (프레임워크니깐 당연한 것일지도). 이 외에 최근 관심 가지는 VueJs란 놈처럼 점진적 프레임워크라 해서 React와 같이 전체 중에 일부(View)기능만 가지고 있는 겉모습만 프레임워크인 녀석이 있다, 재밌는 것은 점진적 프레임워크란 말처럼 확장과 다른 라이브러리와 조합을 쉽게 할 수 있는 형태로 디자인되었다고 한다. (이 [포스트](http://han41858.tistory.com/9) 에 좋은 내용이 많으니 필요시에 읽어보길 권장)


# 라면이냐 라멘이냐 그것이 문제로다.

우리 팀에서는 아직도 JSP,Tymleaf,벨로시티 와 같은 자바 기반, 서버 사이드 템플릿을 쓰는 것이 익숙하다 보니 Structure 를 강제화 하고 모든 것이 준비되어 있는 Angular 보다는 ReactJS나 VueJs를 쓰는 것이 맞다는 것이 나의 결론이다. 하지만 개인적으론 (나의 가슴이) Angular를 외치고 있기 때문에 팀 내에서 VueJS나 React를 쓰더라도 개인적으로는 계속 Angular 를 사용할 생각이다. Angular는 OOP와 MVC 아키텍처에 익숙한 개발 경험이 있는 사람이라면 학습하는 러닝커브가 다소 쉽고 익숙하다, 무엇보다 재미가 있다. 나 같은 경우에는 난생 처음 하는 프론트엔드를 접하는 느낌이 아니라, 많이 익숙한 Spring MVC를 만드는 느낌이 들었다.

# 요즘 이름 있는 친구(?)들의 차이점

이 세션에서는 요즘 핫 한 프론트엔드 프레임워크(라이브러리) 들의 차이점에 대해 이야기 하려 한다.
세션의 내용은 [VueJs:다른 프레임워크와의 비교](https://kr.vuejs.org/v2/guide/comparison.html) Offical 문서를 보고 요약한 내용이다.

VueJS : Virtual Dom , Free([reddit](https://laracasts.com/discuss/channels/general-discussion/is-vuejs-just-for-single-page-applications?page=1)), 유연성(니 맘대로 하세요) , Only Redner(View) Core, Normal, 컴포넌트1:엘리먼트1 의 렌더링 우위,
React : Virtual Dom , Free([reddit](https://www.reddit.com/r/reactjs/comments/4b18k2/is_react_suitable_for_oneoff_components_in_nonspa/)), 강제화(Jsx 사용) , Only Render(View) Core, Normal, 컴포넌트1:엘리먼트N 의 렌더링 우위,
Angular : Native Component , Not Free(Only SPA, 나와 같이 고민한 다른 이들의 의견, 결국 나처럼 Angualr2부터는 불가능하다는 것이 결론 [reddit](https://www.reddit.com/r/Angular2/comments/424nwn/using_angular_2_without_it_being_a_single_page_app/)에 재밌는 글이 있다.) 강제화(Module Structure Style, Typescript : offline compile) , All Embeded (라우팅 등 Heavy), 오프라인 컴파일 & 트리 쉐이킹(Output 이 더 가벼움), Normal(특징이 두드러지는 React와 VueJs에 비해서)

# 무조건 SPA를 고려할 필요가 있는가?

아래 [reddit](https://www.reddit.com/r/reactjs/comments/4b18k2/is_react_suitable_for_oneoff_components_in_nonspa/) 에서 좋은 내용을 얻었다.

Not a facebook employee, but just jump on Facebook.com and open up React Dev tools. You can see that unlike say--netflix, Facebook isn't a SPA.
A lot of the page are rendered without React, most notably: the entire feed, and the top toolbar.
Some elements are using React, like the status composer, the left navigation bar, and pretty much any comment block.

> 페이스북의 직원은 아니지만, Facebook.com 을 보면 SPA가 아니다. 모든 페이지가 Only SPA 형태로 되어있는 것은 아니다.


It's very well suited for minor/major page components. So far it's the only way I use it on production sites. The best thing is you can eventually start connecting the tiny components into larger components, and maybe one day your site will become a SPA.

> 주요 페이지 구성 요소에 매우 적합하다. 지금까지의 생산 현장에 곁들어서 사용할 수 있는 유일한 방법이다.(역주:Angular 와 같은 프레임웤을 놓고 하는 말인듯) 점차 SPA 형태로 변화시키면 좋을 것이다.



#Angualr

나는 Angular 가 Only SPA라는 것을 VirtualDOM 을 쓰지 않는 점, Native 컨버팅, Design Structure 를 이용해 해소해려했다는 점을 두고 Angular는 Only SPA라고 주장하고 싶다, 설사 Only SPA가 아니더라도 구성하는 데에 있어 무리한 러닝커브와 헤딩이 있을 것이라고 확실히 말할 수 있다.
(중요한 것은 아니지만 Angular 로 CDN을 구성해서 Multi-view page 를 만들어봤다는 이야기를 찾아보라, 시도는 해봤다는 글만 몇 보일 뿐 없는 셈이다.) 이런 내 생각을 구글링해보면 대부분의 동의하여 [Why vue from angular](https://wildermuth.com/2017/02/12/Why-I-Moved-to-Vue-js-from-Angular-2) 란 글이나, Angular ==> React로 넘어가는 사람들이 많다. 참고로 Angular1 은 Multi-view 식으로 구성할 수 있다. 그리고 엄연히 AngularJs 와 Angular가 다르다는 점은 다들 알고 있으리라 생각한다. Angular의 장점을 활용하고 Multi-view 식으로도 하고자 한다면 VueJS를 알아보는 것이 맞다. 하지만 나처럼 간단한 Server Management Admin Tool 같은 일반 관리 도구 용도로 만들고자 한다면 Angular 가 빙고 이다, 그러나 혹자는 또 이러한 소리를 할 수 있다. Angular를 쓰면 결국 자바는 큰 의미가 없다, 그러면 React + Servlet를 하면 되지 않느냐고 말한다. 여기서 하나 묻고 싶은 것이 굳이 WAS에 올려서 자바 측에서 데이터 바인딩을 해줄 필요가 있는가 묻고 싶다. VueJS도 그렇고, React도 그렇고 이미 데이터바인딩과 라우팅 을 통해 충분히 MVC 형태로 할 수가 있는 데, 굳이 왜..? 만약 이 구성을 깨고, 단순하게 Form 값에 대한 데이터바인딩과 Submit 용으로 쓰겠다하면 그것도 방법일 수 있다. 애초에 그렇게 쓸것이라면 Jquery를 쓰는 게 좋지 않나(Management Tool 관점에서)? 선택은 자유이다. 이런 점 때문에 최근 많은 사람들이 유연성 있고 Angular의 사상을 이어 받은 VueJS 손을 많이 들어주고 있는 것 같다. 특히 AngularJS1 ==> VueJS로 넘어가는 것이 자연스럽게 받아들여지는 것이 정론도 한 몫하는 듯.

## Virtual Dom에 대해


VirtualDom은 말 그대로 가상의 DOM이다. 이 놈의 근본은 특정 DOM의 Copy 일 뿐, 엄청나게 대단한 녀석은 아니다. 이 녀석이 존재하는 것은 이러하다, 직접적으로 DOM 을 통한 이벤트처리를 절차적방식 이라고 표현하는 데, 이를 최대한 지양하자는 말이다. 절차적 방식으로 DOM을 핸들링하면 엄청난 리소스가 소모 된다. 이는 설명하기에는 많은 것이 필요 하므로 [포스트]()를 읽어보기를 권한다. 

우리가 만들려는 SPA은 동적으로 인터렉션이 자주 일어난다, 당연하게도 DOM의 값을 바뀌고 뒤틀고 지지고 볶는 일이 엄청나게 많다는 얘기이다. 예를 들어 하나의 레이아웃에 다양한 클릭 이벤트와 Animation 이벤트, 그리고 화면의 엘리먼트들이 얽혀있는 복잡한 User Event가 있다고 하자. 모든 Action이 Event의 발생에 따라 클릭=> Animation => 화면에 데이터 출력, 등의 이벤트가 일어날 때마다 동기적으로 반영하고 수행한다고 생각해보자. 엄청나게 비효율적으로 들린다. .

이 내용은 [포스트](https://hashnode.com/post/the-one-thing-that-no-one-properly-explains-about-react-why-virtual-dom-cisczhfj41bmssp53mvfwmgrq) 에 굉장히 잘 정리되어 있는 포스트가 있다, 꼭 읽어 보기를 추천한다.


## angular는 Virtual dom 을 쓰는가?

답은 Middle 이다 (이도저도 아님), 왜냐면 Virtual Dom 을 쓰지는 않지만 Browser 내부의 Shadow Dom을 쓴다고 한다?. 나는 Angular 공부도 하면서 다른 프레임웤들과의 비교를 검토하는 기술 리딩을 하던 와중이어서 이에 관해 많이 궁금했다. 이리저리 찾아 보면 'Angular는 VirtualDom 이 아닙니다' 라고 하는 데, 그 이유에 대해서 알려주는 이는 아무도 없었다. 한동안 고민하던 중에 이 [포스트](https://www.quora.com/Does-Angular-2-have-virtual-DOM-like-Reacts-virtual-DOM)  를 읽고 얼추 조금 이나마 이해를 할 수 있게 되었다.

위 포스트를 읽어 보면 Angular는 Virtual Dom을 쓰고 있지 않다고 한다. 그 이유를 Angular의 internal architecture 를 설명하면서 말하고 있어서 파악하기 어렵지만 개인적으로는 Angular의 철학 인 Multi-Device 로 컨버팅 빌드를 위해서 Virtual Dom 을 쓰지 않는 것이라고 생각 한다. Dom 이라는 것은 결국 Browser 기반 이기 때문에 Virtual Dom을 이용해서 화면을 그린다는 것은 Web App에 특화되어 있다는 말이다. 그리고 Angular로 만들어진 Web App을 Web App이라고 말하지 않는다, Angular App 이라고 말한다.

그렇다면 Virtual Dom을 통해서 타 프레임웤들이 '엘리트먼트의 상태 변화' 를 감지하는 데에 있어 빠른 렌더링이 가능하다는 장점을 얻는 데, Angular는 어떻게 해결했을까?
답은 [한국 포스트:토스트 테크 블로그](http://meetup.toast.com/posts/98) [외국 포스트](https://vsavkin.com/change-detection-in-angular-2-4f216b855d4c) 이곳에서 알수가 있다. 일단 Angular는 상태 감지를 하는 고유의 디텍터(Change Detector)가 있으며, 이놈은 기본적으로 Top-down 형태로 모든 엘리먼트들을 체크한다 [(링크)](http://pascalprecht.github.io/slides/angular-2-change-detection-explained/#/59). 생각보다 단순하고 비효율적으로 무식하게 하는 것 같은 데, 이 무식함을 보완하고자 1) Immutable, 2) Observable 방식으로 해결 한다.

### Immutable 
Immutable는 감시 대상의 속성 값을 변경 하는 것이 아니라, 새로운 객체를 만들어서 속성을 덮어버리는 형태이다. 결국 수정이 일어나면 이전의 객체는 버려지고 새로운 객체를 가르키게 된다. 이런 점으로 상태 변경을 감지하는 데에 있어 내부 값 까지 확인하는 것이 아니라, 가리키고 있는 레퍼런스 주소만으로도 빠르게 디텍터(Change Detector)가 감지할 수 있게 된다. 이는 함수형에서 사용 되는 방법과 유사하다고 느껴졌다.

### Observable
Observable 객체는 Immutable 보다 좀 더 단순하고 명확하다. Immutable은 객체의 레퍼런스 주소로 확인을 했던 것에 반면 Observable 객체는 수정이 일어나면 자신이 디텍터(Change Detector) 에게 이벤트를 발생시켜 반응하게 한다.

결국 정리를 하면 Virtual DOM이나 Angular의 Native Component(가칭) 이나 결국 최종적으로 DOM을 통해서 딱 한번의 렌더링을 한다는 것이 포인트이다. 트렌잭션 관점으로 보면 많은 처리량을 Que에 계쏙 쌓고 있다가 Que의 모든 일을 한번에 처리하고 완료가 되었을 때, 최종적으로 Commit을 한번하는 것과 같다, 실패 시에는 Rollback 하고.

## Native 지원

Angular는 Google의 Offical Site에서 읽어 보면 클라이언트 프레임워크 라고 얘기하고 있다. Device가 어떠하든 Angular만 있으면 Web App, Native Mobile, Desktop App 을 만들 수 있다는 것이 그들의 말이다, 공룡이란 구글 답게 배짱이 후덜덜 하다. 그래서 위에서도 한번 언급했지만 Angular로 만들어진 Web App을 Web App이라고 표현하지 않고 Angular App 이라고 말하는 것을 심심치 않게 볼 수 있다. React 나 VueJs 들도 써드파티나 자체적인 플러그인을 통해 컨버팅 할 수 있게 하지만 하이브리드 앱 형태로 특정 플랫폼 위에서 동작하게 하는 형태이고, Angular는 NativeScript 나 lonic와 같은 벤더들을 통해 디바이스에서 직접 실행 가능한 형태로 Covert Compile 하는 개념이다. 이런 점으로 봐서 명확하게 프레임웤의 사상을 이해할 수 있다. 이런 부분을 보면 왜, Angular 가 Virtual Dom을 쓰지 않고, Structure와 Style을 강제화 하는 지에 대해서 어느 정도 납득이 간다.


# VueJs 와 Angular



## Angular 를 해보면서

## VueJs를 해보면서

# 결론 : 그래서 무엇을 사용 할 것인가?